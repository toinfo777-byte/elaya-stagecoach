name: Touch Docs README date
on:
  schedule: [ { cron: "59 23 * * *" } ]   # 23:59 UTC = 02:59 MSK
  workflow_dispatch: {}
permissions: { contents: write }
jobs:
  touch:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with: { ref: develop, fetch-depth: 0 }
      - name: Bump date in docs/README.md
        run: |
          d=$(date -u +"%d %B %Y")
          perl -0777 -pe "s/Обновлено:[^\n]*/Обновлено: ${d} · Elaya HQ · StageCoach Core/g" -i docs/README.md
      - name: Commit
        run: |
          git config user.name "elaya-bot"
          git config user.email "elaya-bot@users.noreply.github.com"
          git add docs/README.md
          git diff --cached --quiet || git commit -m "docs: refresh README timestamp" && git push origin develop
